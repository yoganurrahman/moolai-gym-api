# Moolai Gym API - Quick Start

## 1. Setup Virtual Environment
python3 -m venv venv
source venv/bin/activate  # Mac/Linux
# venv\Scripts\activate   # Windows

## 2. Install Dependencies
pip install -r requirements.txt

## 3. Setup Environment
cp .env.example .env
# Edit .env dengan konfigurasi database dan SMTP

## 4. Setup Database
# Import schema ke MySQL
mysql -u root -p moolai_gym < sql/schema.sql

## 5. Run Server
# Development (auto-reload)
uvicorn main:app --reload --host 0.0.0.0 --port 8181

# Atau langsung jalankan
python3 main.py

# Production
uvicorn main:app --host 0.0.0.0 --port 8181 --workers 4

## 6. API Documentation
# Swagger UI: http://localhost:8181/docs
# ReDoc: http://localhost:8181/redoc


Rangkuman Modul Moolai Gym
ðŸ“± MOBILE APP (Member)
No	Menu	Fitur
1	Auth	Register (OTP), Login, Forgot Password, PIN
2	Profile	View/Edit profile, Membership status, QR Code
3	Membership	Lihat paket, Beli/Perpanjang, Auto-renewal
4	Check-in	QR Code scan, History kunjungan
5	Class Booking	Jadwal kelas, Booking, Cancel, History
6	Personal Training	Daftar trainer, Beli PT package, Booking jadwal
7	Shop	Beli produk (protein, merchandise), Rental
8	Transactions	History pembelian, Invoice/Receipt
9	Subscriptions	Manage auto-renewal, Change payment method
10	Notifications	Push notif (reminder, promo, billing)

ðŸ–¥ï¸ CMS (Admin/Staff)
No	Menu	Fitur
1	Dashboard	Summary (revenue, members, visits, classes)
2	Members	CRUD member, Freeze, Check-in manual, History
3	Packages	CRUD membership packages (daily, monthly, dll)
4	Classes	CRUD kelas, Jadwal, Assign trainer, Kapasitas
5	Class Bookings	List booking, Attendance, Cancel
6	Trainers	CRUD trainer, Jadwal, Commission
7	PT Packages	CRUD paket PT, Assign trainer
8	Products	CRUD produk, Inventory/Stock
9	Transactions	List transaksi, Create manual, Refund
10	Subscriptions	List recurring, Pause/Cancel
11	Promos & Discounts	CRUD promo, Voucher codes
12	Settings	Pajak, Service charge, Payment gateway
13	Users & Roles	Staff management, Permissions
14	Reports	Revenue, Members, Attendance, Classes


deploy

##Clone
mkdir ~/projects/moolai-gym-api

cd ~/projects/moolai-gym-api
git clone https://github.com/yoganurrahman/moolai-gym-api.git .

## port forwarding
sudo tee /etc/nginx/sites-available/gym.moolai.web.id << 'EOF'
server {
    server_name gym.moolai.web.id;

    location / {
        proxy_pass http://127.0.0.1:8002;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
EOF listen 80;
server {
    server_name gym.moolai.web.id;

    location / {
        proxy_pass http://127.0.0.1:8002;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    listen 80;
}

##Start
sudo ln -s /etc/nginx/sites-available/gym.moolai.web.id /etc/nginx/sites-enabled/

##DNS Record
Tambahkan DNS record di panel domain Anda (Cloudflare, Niagahoster, dll):
Type: A
Name: gym
Value: (IP server dari langkah 1)
TTL: Auto

##SSL
sudo certbot --nginx -d gym.moolai.web.id

##Background Service

pkill -f run.py
nohup ./venv/bin/python run.py > pos.log 2>&1 &